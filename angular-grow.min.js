!function(e){e.module("growingInput",[]).directive("grow",["$timeout",function(t){function i(i,o,r){function a(){var e="keydown keyup keypress change blur focus";n||(e+=" keyup.expanding"),this.$textarea.bind(e,function(){s()})}function s(){var e=this.$textarea.val().replace(/\r\n/g,"\n");this.$textCopy.text(e)}function p(){this._oldTextareaStyles=this.$textarea.attr("style"),this.$textarea.css({margin:0,webkitBoxSizing:"border-box",mozBoxSizing:"border-box",boxSizing:"border-box",width:"100%"})}function d(){var e={display:"block",border:"0 solid",visibility:"hidden",minHeight:this.$textarea.prop("offsetHeight")};"off"===this.$textarea.attr("wrap")?e.overflowX="scroll":e.whiteSpace="pre-wrap",this.$clone.css(e),l()}function l(){t(function(){var t=this,i=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","maxHeight"];e.forEach(i,function(e){var i=h[e];t.$clone.css(e)!==i&&(t.$clone.css(e,i),"maxHeight"===e&&"none"!==i&&t.$clone.css("overflow","hidden"))})},1e3)}function c(){this.$textarea.css({position:"absolute",top:0,left:0,height:"100%",resize:"none","overflow-x":"hidden","overflow-y":"scroll"})}var h=window.getComputedStyle(o[0],null);this.$textarea=o,this.$textCopy=e.element("<span />"),this.$clone=e.element("<pre class='expanding-clone'><br /></pre>").prepend(this.$textCopy),this.$wrapper=e.element("<div class='expanding-wrapper' style='position:relative' />"),p(),d(),c(),this.$textarea.css({margin:0,"-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",width:"100%","max-height":parseInt(r.grow||100)+"px"}).wrap(this.$wrapper).after(this.$clone),a(),s()}var o=function(){var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");null!==i.exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),n="oninput"in document.createElement("input")&&9!==o;return{restrict:"A",link:i}}])}(angular);