!function(e){e.module("growingInput",[]).directive("grow",["$timeout",function(t){function o(t,o,r){function i(){var e="keydown keyup keypress change blur focus";n||(e+=" keyup.expanding"),t.$textarea.bind(e,function(){a()})}function a(){var e=t.$textarea.val().replace(/\r\n/g,"\n");t.$textCopy.text(e)}function p(){t._oldTextareaStyles=t.$textarea.attr("style"),t.$textarea.css({margin:0,webkitBoxSizing:"border-box",mozBoxSizing:"border-box",boxSizing:"border-box",width:"100%"})}function l(){var e={display:"block",border:"0 solid",visibility:"hidden",minHeight:t.$textarea.prop("offsetHeight")};"off"===t.$textarea.attr("wrap")?e.overflowX="scroll":e.whiteSpace="pre-wrap",t.$clone.css(e),d()}function d(){angular.element(document).ready(function(){var r=window.getComputedStyle(o[0],null);console.log(r.fontSize),properties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","maxHeight"],e.forEach(properties,function(e,o){var n=r[e];t.$clone.css(e)!==n&&(t.$clone.css(e,n),"maxHeight"===e&&"none"!==n&&t.$clone.css("overflow","hidden"))})})}function c(){t.$textarea.css({position:"absolute",top:0,left:0,height:"100%",resize:"none","overflow-x":"hidden","overflow-y":"scroll"})}t.$textarea=o,t.$textCopy=e.element("<span />"),t.$clone=e.element("<pre class='expanding-clone'><br /></pre>").prepend(t.$textCopy),t.$wrapper=e.element("<div class='expanding-wrapper' style='position:relative' />"),p(),l(),c(),t.$textarea.css({margin:0,"-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",width:"100%","max-height":parseInt(r.grow||100)+"px"}).wrap(t.$wrapper).after(t.$clone),i(),a()}var r=function(){var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,o=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");null!==o.exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),n="oninput"in document.createElement("input")&&9!==r;return{restrict:"A",link:o,scope:{grow:"=grow"}}}])}(angular);